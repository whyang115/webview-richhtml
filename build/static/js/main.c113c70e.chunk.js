(this["webpackJsonpwebivew-richeditor"]=this["webpackJsonpwebivew-richeditor"]||[]).push([[0],{103:function(e,t,n){},217:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),o=n(17),r=n.n(o),c=(n(103),n(85)),d=n(86),l=n(94),s=n(87),p=n(95),u=n(88),m=n(89),w=n.n(m),h=n(45),v=n(91),C=n(29),I=n(90),b=n.n(I),g=n(30),f=n.n(g);n(216),n(217);function S(){var e=Object(u.a)(["\n  height: 100%;\n  border: 1px solid #eee;\n  .previewWrap {\n    overflow: auto;\n    height: 100%;\n    img {\n      width: 100%;\n    }\n  }\n  .previewContent {\n    padding: 20px 0;\n  }\n  .braftEditorWrap {\n    overflow: hidden;\n    box-sizing: border-box;\n  }\n  .bf-content {\n    height: 100%;\n  }\n"]);return S=function(){return e},e}var X=v.a.div(S()),Z="QCLMePM7TGMVvirxL32Y9696IlLrdz4OsGRlRoWB:1IzZc2hY-HwEv8RmqBC0wdIu2EU=:eyJzY29wZSI6Im1kcGljIiwicmV0dXJuQm9keSI6IntcImtleVwiOlwiJChrZXkpXCIsXCJldGFnXCI6XCIkKGV0YWcpXCIsXCJidWNrZXRcIjpcIiQoYnVja2V0KVwiLFwiZnNpemVcIjpcIiQoZnNpemUpXCIsXCJzZXJ2ZXJOYW1lXCI6XCIkKHg6c2VydmVyTmFtZSlcIixcImZpbGVQYXRoXCI6XCIkKHg6ZmlsZVBhdGgpXCIsXCJmaWxlTmFtZVwiOlwiJCh4OmZpbGVOYW1lKVwiLFwib3JpZ2luYWxGaWxlTmFtZVwiOlwiJCh4Om9yaWdpbmFsRmlsZU5hbWUpXCIsXCJmaWxlRXh0XCI6XCIkKHg6ZmlsZUV4dClcIn0iLCJkZWFkbGluZSI6MTU3MzQwMTU5OSwiaW5zZXJ0T25seSI6MCwiZGV0ZWN0TWltZSI6MCwiZnNpemVMaW1pdCI6MH0=",k=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(s.a)(t).call(this,e))).randomStr=function(){return Math.random().toString(16).slice(2)},n.uploadFile=function(e){var t=e.file,i=e.error,a=e.progress,o=e.success,r=new FileReader;r.readAsDataURL(t),r.addEventListener("load",(function(e){var r=Object(C.get)(e,["target","result"]),c=t.type.split("/")[1],d=h.Base64.encode("upload/".concat(n.randomStr(),".").concat(c)),l="https://upload.qiniup.com/putb64/-1/key/".concat(d);w.a.post(l,r.split(",")[1],{headers:{"Content-Type":"application/octet-stream",Authorization:"UpToken ".concat(n.state.token||Z)},onUploadProgress:function(e){a&&a(e.loaded/e.total*100)}}).then((function(e){var t=(e.data||{}).key,n="https://pic.mingdao.com/".concat(void 0===t?"":t);o({url:n})})).catch((function(e){i(e)}))}))},n.handleEditorChange=function(e){n.setState({editorState:e}),window.richTextHtml=e.toHTML()},n.state={editorState:f.a.createEditorState(null),token:"",preview:!0},window.getTokenAndHtml=function(e,t){var i=h.Base64.decode(t);window.richTextHtml=i,n.setState({editorState:f.a.createEditorState(i),token:e})},window.switchPreview=function(e){n.setState({preview:"true"===e})},n}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=document.querySelector(".braftEditorWrap "),t=document.querySelector(".bf-controlbar");e&&t&&(e.style.paddingBottom=t.offsetHeight+10+"px")}},{key:"render",value:function(){var e=this.state,t=e.editorState,n=e.preview;return a.a.createElement(X,{className:b()("App","preview")},n?a.a.createElement("div",{className:"previewWrap"},a.a.createElement("div",{className:"previewContent",dangerouslySetInnerHTML:{__html:t.toHTML()}})):a.a.createElement(f.a,{className:"braftEditorWrap",media:{accepts:{video:!1,audio:!1,image:!0},externals:{video:!1,audio:!1,image:!0,embed:!1},uploadFn:this.uploadFile},controls:["headings","text-color","bold","italic","underline","strike-through","separator","list-ul","list-ol",{key:"media",title:"\u6dfb\u52a0\u56fe\u7247",text:"\u6dfb\u52a0\u56fe\u7247"},"separator","undo","redo"],value:t,onChange:this.handleEditorChange,onSave:this.submitContent}))}}]),t}(a.a.Component);window.sendContent=function(){Object(C.get)(window,["webkit","messageHandlers","Save","postMessage"])?window.webkit.messageHandlers.Save.postMessage({html:window.richTextHtml}):window.Android.Save(window.richTextHtml)},r.a.render(a.a.createElement(k,null),document.getElementById("root"))},98:function(e,t,n){e.exports=n(223)}},[[98,1,2]]]);
//# sourceMappingURL=main.c113c70e.chunk.js.map